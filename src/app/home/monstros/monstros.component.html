


<div class="monsters-container">
    <!-- Filter Section -->
    <div class="filter-section">
        <div class="filter-header">
            <h5 class="mb-0">
                <i class="fas fa-dragon me-2"></i>
                Filtros de Monstros
            </h5>
        </div>
        <div class="filter-body">
            <div class="row g-3">
                <div class="col-md-6 col-lg-4">
                    <label class="form-label"><i class="fas fa-tag me-1"></i>Nome</label>
                    <select [(ngModel)]="filter.name" class="form-select form-select-sm">
                        <option value="">Todos os nomes</option>
                        <option *ngFor="let name of names" [value]="name">{{ name }}</option>
                    </select>
                </div>
                <div class="col-md-6 col-lg-4">
                    <label class="form-label"><i class="fas fa-star me-1"></i>XP</label>
                    <select [(ngModel)]="filter.xp" class="form-select form-select-sm">
                        <option value="">Todos os XP</option>
                        <option *ngFor="let xp of xp" [value]="xp">{{ xp }}</option>
                    </select>
                </div>
                <div class="col-md-6 col-lg-4">
                    <label class="form-label"><i class="fas fa-balance-scale me-1"></i>Alinhamento</label>
                    <select [(ngModel)]="filter.alignment" class="form-select form-select-sm">
                        <option value="">Todos os alinhamentos</option>
                        <option *ngFor="let alignment of alignments" [value]="alignment">{{ alignment }}</option>
                    </select>
                </div>
                <div class="col-md-6 col-lg-4">
                    <label class="form-label"><i class="fas fa-ruler-vertical me-1"></i>Tamanho</label>
                    <select [(ngModel)]="filter.size" class="form-select form-select-sm">
                        <option value="">Todos os tamanhos</option>
                        <option *ngFor="let size of sizes" [value]="size">{{ size }}</option>
                    </select>
                </div>
                <div class="col-md-6 col-lg-4">
                    <label class="form-label"><i class="fas fa-paw me-1"></i>Tipo</label>
                    <select [(ngModel)]="filter.type" class="form-select form-select-sm">
                        <option value="">Todos os tipos</option>
                        <option *ngFor="let type of types" [value]="type">{{ type }}</option>
                    </select>
                </div>
                <div class="col-md-12 col-lg-4 d-flex align-items-end">
                    <button (click)="applyFilters()" class="btn btn-primary w-100">
                        <i class="fas fa-filter me-2"></i>Aplicar Filtros
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Monsters Grid -->
    <div class="monsters-grid">

        <div *ngFor="let monstro of monstros; let i = index" class="monster-card card shadow-sm">
            <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="fas fa-skull-crossbones me-2"></i>{{ monstro.name }}
                </h5>
                <button (click)="monstro.showImage = !monstro.showImage" class="btn btn-sm btn-outline-light">
                    <i class="fas" [ngClass]="monstro.showImage ? 'fa-eye-slash' : 'fa-eye'"></i>
                    {{ monstro.showImage ? 'Ocultar' : 'Ver' }}
                </button>
            </div>
            <img *ngIf="monstro.showImage && monstro.image" [src]="'https://www.dnd5eapi.co' + monstro.image" class="card-img-top" alt="{{ monstro.name }}">
            <div class="card-body">
                <div class="monster-info mb-3">
                    <span class="badge bg-secondary me-2">
                        <i class="fas fa-align-center me-1"></i>{{ monstro.alignment }}
                    </span>
                    <span class="badge bg-info me-2">
                        <i class="fas fa-arrows-alt me-1"></i>{{ monstro.size }}
                    </span>
                    <span class="badge bg-success">
                        <i class="fas fa-dragon me-1"></i>{{ monstro.type }}
                    </span>
                </div>

                <!-- Combat Stats -->
                <div class="combat-stats mb-3">
                    <h6 class="border-bottom pb-2">
                        <i class="fas fa-shield-alt me-2"></i>Atributos de Combate
                    </h6>
                    <div class="row g-2">
                        <div class="col-4 text-center">
                            <div class="stat-box">
                                <i class="fas fa-heart text-danger"></i>
                                <div class="stat-value">{{ monstro.hit_points }}</div>
                                <div class="stat-label">HP</div>
                            </div>
                        </div>
                        <div class="col-4 text-center">
                            <div class="stat-box">
                                <i class="fas fa-shield text-primary"></i>
                                <div class="stat-value">{{ monstro.armor_class[0].value }}</div>
                                <div class="stat-label">CA</div>
                            </div>
                        </div>
                        <div class="col-4 text-center">
                            <div class="stat-box">
                                <i class="fas fa-running text-success"></i>
                                <div class="stat-value">{{ monstro.speed.walk }}</div>
                                <div class="stat-label">Velocidade</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Collapsible Sections -->
                <div class="action-buttons mb-2">
                    <button class="btn btn-outline-dark btn-sm" type="button" data-bs-toggle="collapse" 
                            [attr.data-bs-target]="'#collapseAttributes' + i" 
                            aria-expanded="false" [attr.aria-controls]="'collapseAttributes' + i">
                        <i class="fas fa-dumbbell me-1"></i>Atributos
                    </button>

                    <button class="btn btn-outline-dark btn-sm" type="button" data-bs-toggle="collapse" 
                            [attr.data-bs-target]="'#collapseProficiencies' + i" 
                            aria-expanded="false" [attr.aria-controls]="'collapseProficiencies' + i">
                        <i class="fas fa-medal me-1"></i>Perícias
                    </button>
                    <button class="btn btn-outline-dark btn-sm" type="button" data-bs-toggle="collapse" 
                            [attr.data-bs-target]="'#collapseSpecialAbilities' + i" 
                            aria-expanded="false" [attr.aria-controls]="'collapseSpecialAbilities' + i">
                        <i class="fas fa-magic me-1"></i>Habilidades
                    </button>
                    <button class="btn btn-outline-dark btn-sm" type="button" data-bs-toggle="collapse" 
                            [attr.data-bs-target]="'#collapseActions' + i" 
                            aria-expanded="false" [attr.aria-controls]="'collapseActions' + i">
                        <i class="fas fa-fist-raised me-1"></i>Ações
                    </button>
                    <button class="btn btn-outline-dark btn-sm" type="button" data-bs-toggle="collapse" 
                            [attr.data-bs-target]="'#collapseLegendaryActions' + i" 
                            aria-expanded="false" [attr.aria-controls]="'collapseLegendaryActions' + i">
                        <i class="fas fa-crown me-1"></i>Lendárias
                    </button>
                </div>

                <!-- Attributes Collapse -->
                <div class="collapse" [id]="'collapseAttributes' + i">
                    <div class="card card-body mb-2">
                        <h6><i class="fas fa-dumbbell me-2"></i>Atributos</h6>
                        <div class="row g-2">
                            <div class="col-4"><strong>FOR:</strong> {{ monstro.strength }}</div>
                            <div class="col-4"><strong>DES:</strong> {{ monstro.dexterity }}</div>
                            <div class="col-4"><strong>CON:</strong> {{ monstro.constitution }}</div>
                            <div class="col-4"><strong>INT:</strong> {{ monstro.intelligence }}</div>
                            <div class="col-4"><strong>SAB:</strong> {{ monstro.wisdom }}</div>
                            <div class="col-4"><strong>CAR:</strong> {{ monstro.charisma }}</div>
                        </div>
                    </div>
                </div>

                <!-- Proficiencies Collapse -->
                <div class="collapse" [id]="'collapseProficiencies' + i">
                    <div class="card card-body mb-2">
                        <h6><i class="fas fa-medal me-2"></i>Perícias</h6>
                        <ul class="list-unstyled mb-0">
                            <li *ngFor="let prof of monstro.proficiencies" class="mb-1">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                {{ prof.proficiency.name }}: <strong>+{{ prof.value }}</strong>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Immunities and Resistances -->
                <div *ngIf="monstro.damage_immunities.length || monstro.damage_resistances.length" class="mb-2">
                    <h6 class="border-bottom pb-2">
                        <i class="fas fa-shield-virus me-2"></i>Defesas Especiais
                    </h6>
                    <p *ngIf="monstro.damage_immunities.length" class="mb-1">
                        <span class="badge bg-success me-1"><i class="fas fa-check-circle"></i></span>
                        <strong>Imunidades:</strong> {{ monstro.damage_immunities.join(', ') }}
                    </p>
                    <p *ngIf="monstro.damage_resistances.length" class="mb-1">
                        <span class="badge bg-warning me-1"><i class="fas fa-shield"></i></span>
                        <strong>Resistências:</strong> {{ monstro.damage_resistances.join(', ') }}
                    </p>
                </div>

                <!-- Special Abilities Collapse -->
                <div class="collapse" [id]="'collapseSpecialAbilities' + i">
                    <div class="card card-body mb-2">
                        <h6><i class="fas fa-magic me-2"></i>Habilidades Especiais</h6>
                        <ul class="list-unstyled mb-0">
                            <li *ngFor="let ability of monstro.special_abilities" class="mb-2">
                                <strong><i class="fas fa-star text-warning me-1"></i>{{ ability.name }}:</strong>
                                <span class="d-block ms-4 text-muted small">{{ ability.desc }}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Actions Collapse -->
                <div class="collapse" [id]="'collapseActions' + i">
                    <div class="card card-body mb-2">
                        <h6><i class="fas fa-fist-raised me-2"></i>Ações</h6>
                        <ul class="list-unstyled mb-0">
                            <li *ngFor="let action of monstro.actions" class="mb-2">
                                <strong><i class="fas fa-bolt text-danger me-1"></i>{{ action.name }}:</strong>
                                <span class="d-block ms-4 text-muted small">{{ action.desc }}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Legendary Actions Collapse -->
                <div class="collapse" [id]="'collapseLegendaryActions' + i">
                    <div class="card card-body mb-2">
                        <h6><i class="fas fa-crown me-2 text-warning"></i>Ações Lendárias</h6>
                        <ul class="list-unstyled mb-0">
                            <li *ngFor="let legendary of monstro.legendary_actions" class="mb-2">
                                <strong><i class="fas fa-gem text-warning me-1"></i>{{ legendary.name }}:</strong>
                                <span class="d-block ms-4 text-muted small">{{ legendary.desc }}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Other Information -->
                <div class="other-info mt-3">
                    <h6 class="border-bottom pb-2">
                        <i class="fas fa-info-circle me-2"></i>Outras Informações
                    </h6>
                    <p class="mb-1">
                        <i class="fas fa-language me-2 text-primary"></i>
                        <strong>Idiomas:</strong> {{ monstro.languages || 'Nenhum' }}
                    </p>
                    <p class="mb-0">
                        <i class="fas fa-star me-2 text-warning"></i>
                        <strong>XP:</strong> {{ monstro.xp }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
